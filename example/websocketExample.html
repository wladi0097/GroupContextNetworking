<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Daddy</title>
</head>
<body>
<script type="text/javascript">



    class websocketConnection {
        constructor(id, path) {
            this.id = id;
            this.wsUri = "ws://localhost:9001/" + path;
            this.testWebSocket()
        }

        testWebSocket() {
            this.websocket = new WebSocket(this.wsUri);
            this.websocket.onopen = this.onOpen.bind(this);
            this.websocket.onclose = this.onClose.bind(this);
            this.websocket.onmessage = this.onMessage.bind(this);
            this.websocket.onerror = this.onError.bind(this);
        }

        onOpen(evt) {
            console.log('connected', this.id, evt);
        }

        onClose(evt) {
            console.log('disconected', this.id);
        }

        onMessage(evt) {
            console.log('getMessage', this.id, evt.data.text())
        }

        onError(evt) {
            console.log('getMessage', this.id, evt.data);
        }

        doSend(message) {
            console.log('sending', this.id, message)
            this.websocket.send(message);
        }
    }



    window.main = new websocketConnection('main', 'new');
</script>
</body>
</html>